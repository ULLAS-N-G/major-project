(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3884],{31502:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var r=t(95155),a=t(12115),i=t(35695),l=t(6874),n=t.n(l),c=t(66766),d=t(30285),o=t(62523),u=t(16829),h=t(48978),m=t(84012),g=t(31530),x=t(51362),p=t(12224),f=t(35756),b=t(45508);let v=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;function j(){var e;let s=(0,i.useRouter)(),{signUp:t,signInWithGoogle:l,signInWithGitHub:j,signInWithApple:y,user:k}=(0,u.A)(),{theme:w}=(0,x.D)(),[N,S]=(0,a.useState)(!1),[C,A]=(0,a.useState)(""),[_,F]=(0,a.useState)(!1),[E,G]=(0,a.useState)(!1),[T,M]=(0,a.useState)(!1),[L,P]=(0,a.useState)(null),[B,D]=(0,a.useState)(null),[H,Q]=(0,a.useState)({redirectUrl:null,inviteToken:null}),[U,O]=(0,a.useState)(null),[$,z]=(0,a.useState)(null),[W,R]=(0,a.useState)(!1),[Y,q]=(0,a.useState)(!1);(0,a.useEffect)(()=>{F(v.test(C))},[C]),(0,a.useEffect)(()=>{S(!0);let e=(0,f.pU)();Q(e);let s=new URLSearchParams(window.location.search).get("ref");s&&z(s),e.inviteToken&&(0,f.IK)(e.inviteToken).then(O)},[]),(0,a.useEffect)(()=>{k&&!T&&s.push((0,f.aQ)(H))},[k,T,s,H]),(0,a.useEffect)(()=>{k&&B&&((0,p.t)("sign_up",{user_id:k.id,user_email:k.email||"",auth_method:B.authMethod,page_source:B.pageSource}),D(null))},[k,B]);let I=async()=>{M(!0),P(null);try{await l(),D({authMethod:"google",pageSource:"sign_up"}),g.Ay.success("Signed up with Google successfully!"),s.push((0,f.aQ)(H))}catch(e){"auth/popup-closed-by-user"!==e.code&&(P({message:e.message||"Failed to sign up with Google",code:e.code}),g.Ay.error(e.message||"Failed to sign up with Google"))}finally{M(!1)}},J=async()=>{M(!0),P(null);try{await j(),D({authMethod:"github",pageSource:"sign_up"}),g.Ay.success("Signed up with GitHub successfully!"),s.push((0,f.aQ)(H))}catch(e){"auth/popup-closed-by-user"!==e.code&&(P({message:e.message||"Failed to sign up with GitHub",code:e.code}),g.Ay.error(e.message||"Failed to sign up with GitHub"))}finally{M(!1)}},K=async()=>{M(!0),P(null);try{await y(),D({authMethod:"apple",pageSource:"sign_up"}),g.Ay.success("Signed up with Apple successfully!"),s.push((0,f.aQ)(H))}catch(e){"auth/popup-closed-by-user"!==e.code&&(P({message:e.message||"Failed to sign up with Apple",code:e.code}),g.Ay.error(e.message||"Failed to sign up with Apple"))}finally{M(!1)}},V=async e=>{if(e.preventDefault(),!_){P({message:"Please enter a valid email address",code:"client/invalid-email-format"}),g.Ay.error("Please enter a valid email address");return}q(!0),P(null);try{let e=await fetch("/api/auth/main-app/magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:C.trim(),redirectUrl:(0,f.aQ)(H)})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to send magic link");R(!0),g.Ay.success("Magic link sent! Check your email.")}catch(e){P({message:e.message||"Failed to send magic link",code:"magic-link-error"}),g.Ay.error(e.message||"Failed to send magic link")}finally{q(!1)}};return(0,r.jsx)(h.L,{children:(0,r.jsxs)("div",{className:"min-h-screen w-full flex",children:[(0,r.jsx)("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n(),{href:"/",className:"inline-block",children:N?"dark"===w?(0,r.jsx)(c.default,{src:"/blink/blink-logo-wordmark--dark-theme.svg",alt:"Blink Logo Light",width:120,height:36,priority:!0}):(0,r.jsx)(c.default,{src:"/blink/blink-logo-wordmark--light-theme.svg",alt:"Blink Logo Dark",width:120,height:36,priority:!0}):(0,r.jsx)("div",{style:{width:120,height:36}})}),(0,r.jsx)("h2",{className:"mt-6 text-2xl font-bold tracking-tight",children:$?"Create your account":(0,f.QB)(H.inviteToken||null,U).signUpTitle}),$&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800/50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-green-700 dark:text-green-400 font-medium",children:"\uD83C\uDF81 Sign up and get 10 free credits!"}),(0,r.jsx)("p",{className:"text-xs text-green-600 dark:text-green-500 mt-1",children:"You're signing up through a referral link"})]}),H.inviteToken&&(0,r.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:U?"Sign in as ".concat(U," to accept this invitation."):"You've been invited to collaborate on a project."})]}),(0,r.jsxs)("div",{className:"bg-card/20 backdrop-blur-sm rounded-lg border border-border/20 p-6 shadow-md",children:[L&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(m.e,{message:L.message,code:L.code,onDismiss:()=>P(null),type:(null==(e=L.code)?void 0:e.startsWith("client/"))?"warning":"error",linkAction:"auth/email-already-in-use"===L.code?{label:"Sign in",href:(0,f.ty)("sign-in",N)}:void 0})}),W?(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-50 dark:bg-green-950/50 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Check your email"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:["We sent a magic link to ",(0,r.jsx)("strong",{children:C})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Click the link in the email to sign up. The link will expire in 1 hour."})]}),(0,r.jsx)("button",{onClick:()=>{R(!1),A("")},className:"text-sm text-muted-foreground hover:text-foreground underline underline-offset-2",children:"Use a different email"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 mb-4",children:[(0,r.jsxs)(d.$,{className:"flex items-center justify-center gap-3 h-12 font-medium transition-colors ".concat(N?"dark"===w?"bg-white text-black hover:bg-gray-100 border-0":"bg-black text-white hover:bg-gray-900 border-0":"bg-black text-white hover:bg-black/90"),onClick:I,disabled:T||Y,children:[(0,r.jsx)(c.default,{src:"/google-logo.svg",alt:"Google",width:20,height:20,className:"flex-shrink-0"}),(0,r.jsx)("span",{className:"truncate",children:"Continue with Google"})]}),(0,r.jsxs)(d.$,{variant:"outline",className:"flex items-center justify-center gap-3 h-12 border-border/50 hover:border-border hover:bg-background/50",onClick:J,disabled:T||Y,children:[N?(0,r.jsx)(c.default,{src:"dark"===w?"/github/github-logo-icon--light.svg":"/github/github-logo-icon--dark.svg",alt:"GitHub",width:20,height:20,className:"flex-shrink-0"}):(0,r.jsx)("div",{className:"w-5 h-5 flex-shrink-0"}),(0,r.jsx)("span",{className:"truncate",children:"Continue with GitHub"})]}),(0,r.jsxs)(d.$,{variant:"outline",className:"flex items-center justify-center gap-3 h-12 border-border/50 hover:border-border hover:bg-background/50",onClick:K,disabled:T||Y,children:[(0,r.jsxs)("svg",{className:"w-5 h-5 flex-shrink-0",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09z"}),(0,r.jsx)("path",{d:"M15.53 3.83c.893-1.09 1.479-2.58 1.309-4.081-1.27.052-2.82.863-3.74 1.93-.831.942-1.558 2.484-1.35 3.941 1.43.111 2.889-.724 3.781-1.79z"})]}),(0,r.jsx)("span",{className:"truncate",children:"Continue with Apple"})]})]}),(0,r.jsxs)("div",{className:"relative my-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-border"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with email"})})]}),(0,r.jsxs)("form",{onSubmit:V,className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,r.jsx)(o.p,{id:"email",type:"email",value:C,onChange:e=>{A(e.target.value),G(!0)},placeholder:"Enter your email",className:"w-full h-12 ".concat(E&&!_&&C?"border-destructive focus-visible:ring-destructive":""),disabled:Y,required:!0})]}),(0,r.jsx)(d.$,{type:"submit",disabled:Y||!_,className:"w-full h-12 bg-secondary text-secondary-foreground hover:bg-secondary/80",children:Y?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Sending magic link..."]}):"Continue with Email"})]})]}),(0,r.jsxs)("div",{className:"space-y-4 mt-6 pt-4 border-t border-border/20",children:[(0,r.jsxs)("div",{className:"text-center text-sm",children:["Already have an account?"," ",(0,r.jsx)(n(),{href:(0,f.ty)("sign-in",N),className:"text-primary hover:underline font-medium",children:"Sign in"})]}),(0,r.jsxs)("div",{className:"text-center text-xs text-muted-foreground",children:["By continuing, you agree to our"," ",(0,r.jsx)(n(),{href:"/terms",className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",(0,r.jsx)(n(),{href:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"})]})]})]})]})}),(0,r.jsx)("div",{className:"hidden lg:flex w-1/2 bg-black items-center justify-center",children:(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(b.A,{})})})]})})}},87896:(e,s,t)=>{Promise.resolve().then(t.bind(t,31502))}},e=>{var s=s=>e(e.s=s);e.O(0,[5965,2992,2848,4134,6435,9348,2814,2486,4212,6874,1246,7018,8441,1684,7358],()=>s(87896)),_N_E=e.O()}]);