"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7018],{1749:(e,t,n)=>{n.d(t,{DynamicBackground:()=>d});var r=n(95155),a=n(55028),i=n(12115),o=n(51362),l=n(88600);function s(e){let{userPreference:t}=e;return(0,r.jsx)("div",{className:"absolute inset-0 transition-colors duration-300 bg-gradient-to-b from-sky-300/20 via-sky-200/10 to-blue-50/20 dark:bg-gradient-to-br dark:from-background dark:via-muted/10 dark:to-muted/20",children:(0,r.jsxs)("div",{className:"absolute inset-0 opacity-40",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-yellow-300/20 via-amber-200/15 to-transparent rounded-full blur-3xl animate-pulse dark:hidden"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-gradient-to-tr from-sky-400/15 via-sky-300/10 to-transparent rounded-full blur-3xl animate-pulse [animation-delay:1s] dark:hidden"}),(0,r.jsx)("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-br from-blue-500/10 via-blue-400/5 to-transparent rounded-full blur-2xl animate-pulse hidden dark:block [animation-delay:0.5s]"}),(0,r.jsx)("div",{className:"absolute bottom-1/3 left-1/3 w-72 h-72 bg-gradient-to-tr from-slate-600/8 via-slate-500/4 to-transparent rounded-full blur-3xl animate-pulse hidden dark:block [animation-delay:1.5s]"})]})})}let u=(0,a.default)(()=>n.e(2288).then(n.bind(n,19907)).then(e=>e.BackgroundEffects),{loadableGenerated:{webpack:()=>[19907]},ssr:!1,loading:()=>(0,r.jsx)(s,{})});function d(e){var t;let[n,a]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!1),{resolvedTheme:f}=(0,o.D)(),{userData:b,loading:h}=(0,l.J)(),g=null==b||null==(t=b.preferences)?void 0:t.theme,[m,p]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e=window.matchMedia("(prefers-reduced-motion: reduce)");p(e.matches);let t=e=>{p(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,i.useEffect)(()=>{a(!0);let e=setTimeout(()=>{c(!0)},100);return()=>clearTimeout(e)},[]),n&&f&&!m&&d)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{userPreference:g}),(0,r.jsx)(u,{...e,reducedMotion:m})]}):(0,r.jsx)(s,{userPreference:g})}},10255:(e,t,n)=>{function r(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return r}}),n(95155),n(47650),n(85744),n(20589)},11133:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(30280).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},12224:(e,t,n)=>{n.d(t,{t:()=>r});function r(e,t){try{window.datafast||(window.datafast=function(){window.datafast.q=window.datafast.q||[],window.datafast.q.push(arguments)}),t?window.datafast(e,t):window.datafast(e)}catch(e){}}},17828:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,n(64054).createAsyncLocalStorage)()},24371:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(30280).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},30285:(e,t,n)=>{n.d(t,{$:()=>u,r:()=>s});var r=n(95155),a=n(12115),i=n(99708),o=n(74466),l=n(59434);let s=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:n,variant:a,size:o,asChild:u=!1,...d}=e,c=u?i.DX:"button";return(0,r.jsx)(c,{className:(0,l.cn)(s({variant:a,size:o,className:n})),ref:t,...d})});u.displayName="Button"},35756:(e,t,n)=>{function r(){let e=new URLSearchParams(window.location.search),t=e.get("returnUrl"),n=e.get("invite");return{redirectUrl:t?decodeURIComponent(t):null,inviteToken:n}}async function a(e){try{var t;let n=await fetch("/api/invites/details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(!n.ok)return null;return(null==(t=(await n.json()).invite)?void 0:t.email)||null}catch(e){return null}}function i(e){let{redirectUrl:t,inviteToken:n}=e,r=t||"/";if(n&&"/"!==r){let e=r.includes("?")?"&":"?";return"".concat(r).concat(e,"invite=").concat(n)}return r}function o(e,t){if(!t)return"/".concat(e);let n=window.location.search;return"/".concat(e).concat(n)}function l(e,t){return e?{signInTitle:"Sign in".concat(t?" as ".concat(t):""," to accept invitation"),signInHasInvite:!0,signUpTitle:"Sign in to accept invitation",signUpHasInvite:!0,inviteEmail:t}:{signInTitle:"Sign in to your account",signInHasInvite:!1,signUpTitle:"Create your account",signUpHasInvite:!1}}n.d(t,{IK:()=>a,QB:()=>l,aQ:()=>i,pU:()=>r,ty:()=>o})},36645:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let r=n(88229)._(n(67357));function a(e,t){var n;let a={};"function"==typeof e&&(a.loader=e);let i={...a,...t};return(0,r.default)({...i,modules:null==(n=i.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},45508:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(95155);n(12115);let a=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{children:"\n          @keyframes earthRotate {\n            0% { background-position: 0 0; }\n            100% { background-position: 400px 0; }\n          }\n          @keyframes twinkling { 0%,100% { opacity:0.1; } 50% { opacity:1; } }\n          @keyframes twinkling-slow { 0%,100% { opacity:0.1; } 50% { opacity:1; } }\n          @keyframes twinkling-long { 0%,100% { opacity:0.1; } 50% { opacity:1; } }\n          @keyframes twinkling-fast { 0%,100% { opacity:0.1; } 50% { opacity:1; } }\n        "}),(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"relative w-[250px] h-[250px] rounded-full overflow-hidden shadow-[0_0_20px_rgba(255,255,255,0.2),-5px_0_8px_#c3f4ff_inset,15px_2px_25px_#000_inset,-24px_-2px_34px_#c3f4ff99_inset,250px_0_44px_#00000066_inset,150px_0_38px_#000000aa_inset]",style:{backgroundImage:"url('https://pub-940ccf6255b54fa799a9b01050e6c227.r2.dev/globe.jpeg')",backgroundSize:"cover",backgroundPosition:"left",animation:"earthRotate 30s linear infinite"},children:[(0,r.jsx)("div",{className:"absolute left-[-20px] w-1 h-1 bg-white rounded-full",style:{animation:"twinkling 3s infinite"}}),(0,r.jsx)("div",{className:"absolute left-[-40px] top-[30px] w-1 h-1 bg-white rounded-full",style:{animation:"twinkling-slow 2s infinite"}}),(0,r.jsx)("div",{className:"absolute left-[350px] top-[90px] w-1 h-1 bg-white rounded-full",style:{animation:"twinkling-long 4s infinite"}}),(0,r.jsx)("div",{className:"absolute left-[200px] top-[290px] w-1 h-1 bg-white rounded-full",style:{animation:"twinkling 3s infinite"}}),(0,r.jsx)("div",{className:"absolute left-[50px] top-[270px] w-1 h-1 bg-white rounded-full",style:{animation:"twinkling-fast 1.5s infinite"}}),(0,r.jsx)("div",{className:"absolute left-[250px] top-[-50px] w-1 h-1 bg-white rounded-full",style:{animation:"twinkling-long 4s infinite"}}),(0,r.jsx)("div",{className:"absolute left-[290px] top-[60px] w-1 h-1 bg-white rounded-full",style:{animation:"twinkling-slow 2s infinite"}})]})})]})},48978:(e,t,n)=>{n.d(t,{L:()=>o});var r=n(95155);n(12115);var a=n(59434),i=n(1749);function o(e){let{children:t,className:n,fullHeight:o=!0,backgroundOpacity:l=100}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("relative bg-background overflow-hidden flex flex-col",o&&"min-h-screen",n),children:[(0,r.jsx)("div",{className:"fixed inset-0 w-full h-full z-0",style:{opacity:l/100},children:(0,r.jsx)(i.DynamicBackground,{})}),(0,r.jsx)("div",{className:"relative z-10 flex-1 flex flex-col h-full",children:t})]})}},50594:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(30280).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},55028:(e,t,n)=>{n.d(t,{default:()=>a.a});var r=n(36645),a=n.n(r)},62146:(e,t,n)=>{function r(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),n(45262)},62523:(e,t,n)=>{n.d(t,{p:()=>o});var r=n(95155),a=n(12115),i=n(59434);let o=a.forwardRef((e,t)=>{let{className:n,type:a,...o}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2","text-base md:text-sm ring-offset-background file:border-0 file:bg-transparent","file:text-base md:file:text-sm file:font-medium placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...o})});o.displayName="Input"},64054:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{bindSnapshot:function(){return o},createAsyncLocalStorage:function(){return i},createSnapshot:function(){return l}});let n=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class r{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}static bind(e){return e}}let a="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function i(){return a?new a:new r}function o(e){return a?a.bind(e):r.bind(e)}function l(){return a?a.snapshot():function(e,...t){return e(...t)}}},67039:(e,t,n)=>{n.r(t),n.d(t,{app:()=>r.yA,auth:()=>r.auth,db:()=>r.db,storage:()=>r.IG});var r=n(80148)},67357:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let r=n(95155),a=n(12115),i=n(62146);function o(e){return{default:e&&"default"in e?e.default:e}}n(10255);let l={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},s=function(e){let t={...l,...e},n=(0,a.lazy)(()=>t.loader().then(o)),s=t.loading;function u(e){let o=s?(0,r.jsx)(s,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,u=l?a.Suspense:a.Fragment,d=t.ssr?(0,r.jsxs)(r.Fragment,{children:[null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(u,{...l?{fallback:o}:{},children:d})}return u.displayName="LoadableComponent",u}},84012:(e,t,n)=>{n.d(t,{e:()=>d});var r=n(95155);n(12115);var a=n(24371),i=n(11133),o=n(50594),l=n(6874),s=n.n(l),u=n(30285);function d(e){let{message:t,type:n="error",code:l,helpText:d,action:c,linkAction:f,onDismiss:b}=e,h={error:{bgColor:"bg-destructive/10",borderColor:"border-destructive/20",textColor:"text-destructive",icon:(0,r.jsx)(a.A,{className:"h-5 w-5 text-destructive mr-2 flex-shrink-0"})},warning:{bgColor:"bg-amber-500/10",borderColor:"border-amber-500/20",textColor:"text-amber-500",icon:(0,r.jsx)(i.A,{className:"h-5 w-5 text-amber-500 mr-2 flex-shrink-0"})},info:{bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",textColor:"text-blue-500",icon:(0,r.jsx)(o.A,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0"})}}[n],g=((e,t)=>{if(!e)return t;if(["auth/invalid-credential","auth/user-not-found","auth/wrong-password"].includes(e))return"Invalid login credentials";switch(e){case"auth/email-already-in-use":return"An account with this email already exists";case"auth/weak-password":return"Password should be at least 6 characters";case"auth/invalid-email":return"Please enter a valid email address";case"auth/too-many-requests":return"Too many unsuccessful attempts. Please try again later";case"auth/account-exists-with-different-credential":return"An account with this email already exists with a different sign-in method";case"client/passwords-mismatch":return"Passwords do not match";case"client/terms-not-accepted":return"You must agree to the terms and conditions";default:return t}})(l,t);return(0,r.jsxs)("div",{className:"p-3 ".concat(h.bgColor," border ").concat(h.borderColor," rounded-md text-sm flex items-center justify-between"),children:[(0,r.jsxs)("div",{className:"flex items-center",children:[h.icon,(0,r.jsx)("span",{className:"".concat(h.textColor," font-medium"),children:g})]}),c?(0,r.jsx)(u.$,{variant:"ghost",size:"sm",className:"text-xs h-7 px-2 hover:bg-background/50 ".concat(h.textColor),onClick:c.onClick,children:c.label}):f?(0,r.jsx)(u.$,{variant:"ghost",size:"sm",className:"text-xs h-7 px-2 hover:bg-background/50 ".concat(h.textColor),asChild:!0,children:(0,r.jsx)(s(),{href:f.href,children:f.label})}):b?(0,r.jsx)("button",{onClick:b,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Dismiss",children:(0,r.jsx)(a.A,{className:"h-4 w-4"})}):null]})}},85744:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return r.workAsyncStorageInstance}});let r=n(17828)},88600:(e,t,n)=>{n.d(t,{UserProvider:()=>h,J:()=>b});var r=n(95155),a=n(12115),i=n(16829),o=n(35317),l=n(67039),s=n(20907);let u="users";async function d(e){try{let t=(0,o.H9)(l.db,u,e),n=await (0,o.x7)(t);if(n.exists())return n.data();return null}catch(e){throw s.vF.error("Error getting user:",e),e}}var c=n(56671);let f=(0,a.createContext)({userData:null,loading:!0,error:null,updateUserData:async()=>{}}),b=()=>(0,a.useContext)(f);function h(e){let{children:t}=e,{user:n}=(0,i.A)(),[b,h]=(0,a.useState)(null),[g,m]=(0,a.useState)(!0),[p,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(h(null),x(null),!n)return void m(!1);m(!0);let e=()=>{},t=!0;return(async()=>{try{let r=await d(n.id);t&&(h(r),m(!1));try{e=function(e,t){let n=(0,o.H9)(l.db,u,e);return(0,o.aQ)(n,e=>{e.exists()?t(e.data()):t(null)},e=>{s.vF.error("Error subscribing to user:",e),t(null)})}(n.id,e=>{t&&(h(e),m(!1))})}catch(e){}}catch(e){t&&(x(e instanceof Error?e:Error("Failed to get user data")),m(!1))}})(),()=>{t=!1,e()}},[n]);let y=async e=>{if(!n||!b)throw Error("No authenticated user");let t={...b};h(t=>t?{...t,...e}:null);try{let t=null===l.auth||void 0===l.auth?void 0:l.auth.currentUser;if(!t)throw Error("No authenticated user");let r=await t.getIdToken(),a=await fetch("/api/users/".concat(n.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update user")}}catch(e){throw h(t),x(e instanceof Error?e:Error("Unknown error")),c.oR.error("Failed to update user data. Please try again."),e}};return(0,r.jsx)(f.Provider,{value:{userData:b,loading:g,error:p,updateUserData:y},children:t})}}}]);